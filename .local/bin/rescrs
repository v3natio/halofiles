#!/bin/bash

# script that swaps screens depending on whether the HDMI is plugged in, or not

intern="eDP"  # Internal display name
extern="HDMI-A-0"  # HDMI display name
intern_audio="alsa_output.pci-0000_04_00.6.analog-stereo"
extern_audio="alsa_output.pci-0000_04_00.1.hdmi-stereo"

function connect() {
  xrandr --output "$intern" --off --output "$extern" --auto
  pactl set-default-sink "$extern_audio"
  setbg
  remaps
}

function disconnect() {
  xrandr --output "$extern" --off --output "$intern" --auto
  pactl set-default-sink "$intern_audio"
  setbg
  remaps
}

if [ "$(cat /sys/class/drm/card1-HDMI-A-1/status)" == "connected" ]; then
  connect
elif [ "$(cat /sys/class/drm/card1-HDMI-A-1/status)" == "disconnected" ]; then
  disconnect
else
  exit
fi
